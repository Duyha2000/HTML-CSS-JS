<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="main.css" />
  </head>
  <body>
    <h1 id="title">This is a text .This is a text.This is a text.</h1>
    <button id="hideText">Hide text</button>
    <button id="showText">Show text</button>

    <div class="container">
      <h2>Modal Example</h2>
      <button id="clickboxon">Open Modal</button>
      <div id="box" class="div">
        <p>Some text in the Moddal</p>
        <p id="iconx">X</p>
      </div>
    </div>
    <div id="boxcontainer">
      <h1>Change background color</h1>
      <p>Mouse over the squares!</p>
      <div id="flexbox">
        <div id="box1"></div>
        <div id="box2"></div>
        <div id="box3"></div>
      </div>
    </div>
    <form onsubmit="handleSubmit(event)">
      <input type="text" id="username" oninput="handleUsernameChange()" />
      <p id="errorUserName"></p>
      <input type="password" id="password" oninput="handlePasswordChange()" />
      <p id="errorPassword"></p>
      <button type="submit">Submit Form!!!</button>
    </form>

    <script>
      let username = document.getElementById("username");
      let password = document.getElementById("password");
      let errorUserName = document.getElementById("errorUserName");
      let errorPassword = document.getElementById("errorPassword");
      let isFlag = true;

      const handleUsernameChange = () => {
        if (username.value === "") {
          errorUserName.innerHTML = "Tài khoản không được bỏ trống";
          errorUserName.style.display = "block";
          errorUserName.style.color = "red";
          isFlag = false;
        } else if (username.value.length < 8) {
          errorUserName.innerHTML = "Tài khoản phải có ít nhất 8 ký tự";
          errorUserName.style.display = "block";
          errorUserName.style.color = "red";
          isFlag = false;
        } else {
          errorUserName.style.display = "none";
          isFlag = true;
        }
      };

      const handlePasswordChange = () => {
        if (password.value === "") {
          errorPassword.innerHTML = "Mật khẩu không được bỏ trống";
          errorPassword.style.display = "block";
          errorPassword.style.color = "red";
          isFlag = false;
        } else if (password.value.length < 8) {
          errorPassword.innerHTML = "Mật khẩu phải có ít nhất 8 ký tự";
          errorPassword.style.display = "block";
          errorPassword.style.color = "red";
          isFlag = false;
        } else {
          errorPassword.style.display = "none";
          isFlag = true;
        }
      };

      const users = [];
      const handleSubmit = (event) => {
        event.preventDefault();
        const newUser = {
          id: Math.floor(Math.random() * 1000),
          username: username.value,
          password: password.value,
        };
        // Username, password k dc de trong, phai nho hon 8 ky tu, username khong duoc trung
        const uniqueUser = users.some(
          (user) => user.username === username.value // da ton tai user
        );
        if (uniqueUser) {
          alert("User da ton tai");
          isFlag = false;
        }
        if (isFlag) {
          users.push(newUser);
          console.log("Success");
          console.log("New User", users);
          event.target.reset();
        }
      };
    </script>
    <script src="main.js"></script>
  </body>
</html>
